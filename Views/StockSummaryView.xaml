<UserControl x:Class="InventoryPro.Views.StockSummaryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:InventoryPro.ViewModels">

    <Grid Margin="16">
        <DataGrid 
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal">

            <DataGrid.Resources>

                <!-- GROUP BY PRODUCT -->
                <CollectionViewSource x:Key="GroupedData"
                                      Source="{Binding Entries}">
                    <CollectionViewSource.GroupDescriptions>
                        <PropertyGroupDescription PropertyName="SKU"/>
                    </CollectionViewSource.GroupDescriptions>
                </CollectionViewSource>

                <!-- GROUP HEADER -->
                <Style TargetType="GroupItem">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GroupItem">
                                <StackPanel>
                                    <Border Background="#F3F4F6" Padding="6">
                                        <TextBlock FontWeight="Bold"
                                                   Text="{Binding Name}"/>
                                    </Border>
                                    <ItemsPresenter/>
                                </StackPanel>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

            </DataGrid.Resources>

            <DataGrid.ItemsSource>
                <Binding Source="{StaticResource GroupedData}"/>
            </DataGrid.ItemsSource>

            <DataGrid.Columns>
                <DataGridTextColumn Header="SKU" Binding="{Binding SKU}" Width="90"/>
                <DataGridTextColumn Header="Product" Binding="{Binding ProductName}" Width="*"/>

                <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="90"/>
                <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="180"/>
                <DataGridTextColumn Header="Qty" Binding="{Binding Qty}" Width="70"/>
                <DataGridTextColumn Header="Remaining" Binding="{Binding Remaining}" Width="90"/>
                <DataGridTextColumn Header="Date"
                                    Binding="{Binding Date, StringFormat=g}"
                                    Width="140"/>
            </DataGrid.Columns>

        </DataGrid>
    </Grid>
</UserControl>
